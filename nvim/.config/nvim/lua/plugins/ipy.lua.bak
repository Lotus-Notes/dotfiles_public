return{
{
  "bfredl/nvim-ipy",
  ft = { "python", "jupyter" },
  dependencies = {
    -- REQUIRED for vim-ipython-cell
    {
      "jpalardy/vim-slime",
      init = function()
        -- send to Neovim's built-in :terminal
        vim.g.slime_target = "neovim"
        vim.g.slime_python_ipython = 1
      end,
    },
    {
      "hanschen/vim-ipython-cell",
      init = function()
        -- use TAGS (the default). DON'T set delimit_cells_by to "# %%"
        vim.g.ipython_cell_delimit_cells_by = "tags"
        vim.g.ipython_cell_tag = { "# %%", "#%%", "# <codecell>", "##" } -- any you like
      end,
      config = function()
        vim.keymap.set("n", "<leader>rc", ":IPythonCellExecuteCell<CR>",    { desc = "Run current cell" })
        vim.keymap.set("n", "<leader>ra", ":IPythonCellExecuteCellJump<CR>",{ desc = "Run cell & jump" })
        vim.keymap.set("n", "<leader>rn", ":IPythonCellNextCell<CR>",       { desc = "Next cell" })
        vim.keymap.set("n", "<leader>rp", ":IPythonCellPrevCell<CR>",       { desc = "Prev cell" })
        vim.keymap.set("n", "<leader>rl", ":IPythonCellClear<CR>",          { desc = "Clear IPython" })
      end,
    },
  },
  config = function()
    -- keep this if you still want nvim-ipy's REPL workflow separately
    vim.keymap.set("n", "<leader>rr", ":IPython<CR>", { desc = "Start/attach nvim-ipy kernel" })
  end,
}
}
